## Мы напишем веб-приложение «Журнал обучения»

### Активация виртуальной среды
- Создайте для проекта новый каталог learning_log, перейдите в этот каталог
в терминальном режиме и создайте виртуальную среду, используя следующие
команды:
learning_log$ python -m venv ll_env
learning_log$

```bash
learning_log$ python -m venv ll_env
```

```bash
source ll_env/bin/activate
```

Чтобы завершить использование виртуальной среды, введите команду deactivate:
(ll_env)learning_log$ deactivate
learning_log$

```bash
deactivate
```

### Установка Django

- После того как вы создали свою виртуальную среду и активизировали ее, устано-
вите Django с помощью инструмента pip:
(ll_env)learning_log$ pip install --upgrade pip
(ll_env)learning_log$ pip install django

```bash
pip install --upgrade pip
```
```bash
pip install django
```

### Создание проекта в Django

Не выходя из активной виртуальной среды (пока ll_env выводится в круглых
скобках), введите следующие команды для создания нового проекта:
(ll_env)learning_log$ django-admin startproject ll_project .

```bash
django-admin startproject ll_project.
```

Команда startproject дает Django указание создать новый проект ll_project.
Благодаря точке в конце команды создается новый проект со структурой катало-
гов, которая упрощает развертывание приложения на сервере после завершения
разработки.

### Создание базы данных

Django хранит бо́льшую часть информации, относящейся к проекту, в базе данных,
поэтому на следующем этапе необходимо создать базу данных, с которой Django
сможет работать. Введите следующую команду (все еще не покидая активную
среду):
(ll_env)learning_log$ python manage.py migrate

```bash
python manage.py migrate
```

### Просмотр проекта

Убедимся в том, что проект был создан правильно. Введите команду runserver для
просмотра текущего состояния проекта:
(ll_env)learning_log$ python manage.py runserver

- Запустить локальный сервер, выполнив команду: 
```bash
python manage.py runserver
```

### Начало работы над приложением

Проект Django представляет собой группу отдельных приложений, совместная
работа которых обеспечивает работу проекта в целом. Пока мы создадим одно
приложение, которое будет выполнять бо́ льшую часть работы в нашем проекте.
Другое приложение для управления учетными записями пользователей будет до-
бавлено в главе 19.
Оставьте сервер разработки выполняться в терминальном окне, открытом ранее.
Откройте новое терминальное окно (или вкладку) и перейдите в каталог, содержа-
щий файл manage.py. Активируйте виртуальную среду и выполните команду startapp:

learning_log$ source ll_env/bin/activate
(ll_env)learning_log$ python manage.py startapp learning_logs
(ll_env)learning_log$ ls
db.sqlite3 learning_logs ll_env ll_project manage.py

```bash
python manage.py startapp learning_logs
```


(ll_env)learning_log$ ls learning_logs/
__init__.py admin.py apps.py migrations models.py tests.py views.py

Команда startapp имя_приложения дает Django указание создать инфраструктуру,
необходимую для создания приложения. Заглянув сейчас в каталог проекта, вы
найдете в нем новую папку learning_logs . Воспользуйтесь командой ls, чтобы
увидеть, какие файлы были созданы Django . Самые важные файлы в этой пап-
ке — models.py, admin.py и views.py. Файл models.py будет использоваться для
определения данных, которыми нужно управлять в нашем приложении. К файлам
admin.py и views.py мы вернемся позднее.

### Административный сайт Django
Django позволяет легко работать с моделями, определенными для приложения,
через административный сайт (admin site). Он используется администраторами
сайта, а не рядовыми пользователями. В этом разделе мы создадим такой сайт и ис-
пользуем его для добавления некоторых тем через модель Topic.
Создание суперпользователя

Чтобы создать суперпользователя в Django, введите следующую команду и ответьте
на запросы:
(ll_env)learning_log$ python manage.py createsuperuser

```bash
python manage.py createsuperuser
```
### Регистрация модели на административном сайте

- Django добавляет некоторые модели (например, User и Group) на административ-
ный сайт автоматически, но модели, которые мы создали, придется регистрировать
вручную.
При запуске приложения learning_logs Django создает файл admin.py в одном
каталоге с models.py. Откройте файл admin.py:

admin.py
from django.contrib import admin
Чтобы зарегистрировать Topic на административном сайте, введите следующую
команду:
from django.contrib import admin
from .models import Topic
admin.site.register(Topic)


### Интерактивная оболочка Django

- Введенные данные можно проанализировать на программном уровне в интерактив-
ном терминальном сеансе. Эта интерактивная среда, называемая оболочкой (shell)
Django, прекрасно подходит для тестирования и диагностики проекта. Вот пример
сеанса, проходящего в интерактивной оболочке:
(ll_env)learning_log$ python manage.py shell
>>> from learning_logs.models import Topic
>>> Topic.objects.all()
<QuerySet [<Topic: Chess>, <Topic: Rock Climbing>]>
Команда python manage.py shell (выполняемая в активной виртуальной среде)
запускает интерпретатор Python, который может использоваться для работы с ин-
формацией в базе данных проекта. В данном случае мы импортируем модель Topic
из модуля learning_logs.models . Затем метод Topic.objects.all() используется
для получения всех экземпляров модели Topic; возвращаемый список называется
итоговым набором (queryset).

- При каждом изменении модели необходимо перезапустить оболочку, чтобы увидеть
результаты этих изменений. Чтобы завершить сеанс работы с оболочкой, нажмите
сочетание клавиш Сtrl+D

### Примечание
models.py
from django.db import models

- Полный список всех полей, которые могут использоваться в модели, приведен в до-
кументе Django Model Field Reference на сайте https://docs.djangoproject.com/en/4.1/
ref/models/fields. Возможно, вся эта информация вам сейчас не понадобится, но она
будет в высшей степени полезной, когда вы начнете разрабатывать собственные
приложения.

- Каждый раз, когда вы захотите изменить данные, которыми управляет приложение
«Журнал обучения», выполните эти три действия: внесите изменения в models.py,
вызовите makemigrations для learning_logs и дайте Django указание выполнить
миграцию проекта (migrate).

```bash
python manage.py makemigrations learning_logs
```
```bash
python manage.py migrate
```

- Django API. При написании кода для работы с данными проекта вы создаете
запрос. Просмотрите документацию по созданию запросов к данным, доступную
по адресу: 

https://docs.djangoproject.com/en/4.1/topics/db/queries 

Многое из того, что вы увидите, покажется новым, но эта информация пригодится, когда вы начнете работать над собственными проектами.



https://proproprogs.ru/django
